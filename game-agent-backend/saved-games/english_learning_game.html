<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üéØ Âø´‰πêÂ≠¶Ëã±ËØ≠ - Âä®Áâ©‰∏ñÁïåÁØá</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            user-select: none;
        }

        body {
            font-family: "Comic Sans MS", "Arial Rounded MT Bold", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            -webkit-overflow-scrolling: touch;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #gameContainer {
            width: 100%;
            max-width: 1200px;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .info-box {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #score {
            color: #10b981;
        }

        #level {
            color: #8b5cf6;
        }

        #streak {
            color: #f59e0b;
        }

        #gameArea {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        #questionArea {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            min-width: 300px;
        }

        #wordDisplay {
            font-size: 48px;
            color: #1e293b;
            margin-bottom: 20px;
            letter-spacing: 5px;
        }

        #imageDisplay {
            width: 200px;
            height: 200px;
            background: white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            margin: 0 auto 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        #optionsContainer {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .option-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 20px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .option-card:active {
            transform: scale(0.95);
        }

        .option-card.correct {
            background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
            animation: bounce 0.5s;
        }

        .option-card.incorrect {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            animation: shake 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        #letterContainer {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .letter-tile {
            width: 60px;
            height: 60px;
            background: white;
            border: 3px solid #cbd5e1;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .letter-tile.selected {
            background: #fbbf24;
            border-color: #f59e0b;
            transform: scale(1.1);
        }

        .letter-tile:active {
            transform: scale(0.9);
        }

        #soundBtn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s;
            margin: 20px 0;
        }

        #soundBtn:active {
            transform: scale(0.95);
        }

        #progressBar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        #progressFill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e 0%, #10b981 100%);
            transition: width 0.5s;
            border-radius: 10px;
        }

        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            color: white;
        }

        #startScreen h1 {
            font-size: 48px;
            margin-bottom: 30px;
            text-align: center;
        }

        .level-select {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .level-btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 25px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s;
        }

        .level-btn:active {
            transform: scale(0.95);
        }

        #messageDisplay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 40px 60px;
            border-radius: 30px;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 500;
        }

        .achievement {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            position: fixed;
            top: 100px;
            right: 20px;
            font-size: 18px;
            display: none;
            animation: slideIn 0.5s;
            z-index: 400;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        #hintBtn {
            background: linear-gradient(135deg, #f59e0b 0%, #eab308 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 10px;
        }

        .star-animation {
            position: fixed;
            font-size: 40px;
            animation: starFloat 2s ease-out forwards;
            pointer-events: none;
            z-index: 600;
        }

        @keyframes starFloat {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            #wordDisplay {
                font-size: 36px;
            }

            .option-card {
                font-size: 20px;
                padding: 15px;
                min-height: 60px;
            }

            .letter-tile {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }

            #startScreen h1 {
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="header">
            <div class="info-box">
                <span>üéØ</span>
                <span>ÂàÜÊï∞: <span id="score">0</span></span>
            </div>
            <div class="info-box">
                <span>üìä</span>
                <span>ÂÖ≥Âç°: <span id="level">1</span>/3</span>
            </div>
            <div class="info-box">
                <span>üî•</span>
                <span>ËøûÂáª: <span id="streak">0</span></span>
            </div>
        </div>

        <div id="progressBar">
            <div id="progressFill" style="width: 0%"></div>
        </div>

        <div id="gameArea">
            <div id="questionArea">
                <div id="imageDisplay"></div>
                <div id="wordDisplay"></div>
                <button id="soundBtn">üîä Êí≠ÊîæÂèëÈü≥</button>
                <div id="letterContainer"></div>
                <button id="hintBtn" style="display: none">üí° ÊèêÁ§∫ (-5ÂàÜ)</button>
            </div>

            <div id="optionsContainer"></div>
        </div>
    </div>

    <div id="messageDisplay"></div>
    <div class="achievement" id="achievementDisplay"></div>

    <div id="startScreen">
        <h1>üåü Âø´‰πêÂ≠¶Ëã±ËØ≠ - Âä®Áâ©‰∏ñÁïå üêæ</h1>
        <p style="font-size: 20px; margin-bottom: 30px;">ÈÄâÊã©Ê∏∏ÊàèÊ®°ÂºèÂºÄÂßãÂ≠¶‰π†ÂêßÔºÅ</p>
        <div class="level-select">
            <button class="level-btn" data-level="1">
                üìñ ÂçïËØçËÆ§Áü•<br>
                <small>ÁúãÂõæÈÄâÂçïËØç</small>
            </button>
            <button class="level-btn" data-level="2">
                üëÇ Âê¨Èü≥ÈÄâÂõæ<br>
                <small>Âê¨Â£∞Èü≥ÈÄâÂõæÁâá</small>
            </button>
            <button class="level-btn" data-level="3">
                ‚úèÔ∏è ÂçïËØçÊãºÂÜô<br>
                <small>ÊãºÂá∫Ê≠£Á°ÆÂçïËØç</small>
            </button>
        </div>
    </div>

    <script>
        // Ê∏∏ÊàèÊï∞ÊçÆ
        const vocabulary = {
            animals: [
                { word: 'CAT', chinese: 'Áå´', emoji: 'üê±', sound: 'cat' },
                { word: 'DOG', chinese: 'Áãó', emoji: 'üê∂', sound: 'dog' },
                { word: 'BIRD', chinese: 'È∏ü', emoji: 'üê¶', sound: 'bird' },
                { word: 'FISH', chinese: 'È±º', emoji: 'üêü', sound: 'fish' },
                { word: 'RABBIT', chinese: 'ÂÖîÂ≠ê', emoji: 'üê∞', sound: 'rabbit' },
                { word: 'LION', chinese: 'ÁãÆÂ≠ê', emoji: 'ü¶Å', sound: 'lion' },
                { word: 'ELEPHANT', chinese: 'Â§ßË±°', emoji: 'üêò', sound: 'elephant' },
                { word: 'MONKEY', chinese: 'Áå¥Â≠ê', emoji: 'üêµ', sound: 'monkey' },
                { word: 'PANDA', chinese: 'ÁÜäÁå´', emoji: 'üêº', sound: 'panda' },
                { word: 'TIGER', chinese: 'ËÄÅËôé', emoji: 'üêÖ', sound: 'tiger' }
            ],
            colors: [
                { word: 'RED', chinese: 'Á∫¢Ëâ≤', emoji: 'üî¥', sound: 'red' },
                { word: 'BLUE', chinese: 'ËìùËâ≤', emoji: 'üîµ', sound: 'blue' },
                { word: 'GREEN', chinese: 'ÁªøËâ≤', emoji: 'üü¢', sound: 'green' },
                { word: 'YELLOW', chinese: 'ÈªÑËâ≤', emoji: 'üü°', sound: 'yellow' },
                { word: 'PINK', chinese: 'Á≤âËâ≤', emoji: 'ü©∑', sound: 'pink' }
            ],
            fruits: [
                { word: 'APPLE', chinese: 'ËãπÊûú', emoji: 'üçé', sound: 'apple' },
                { word: 'BANANA', chinese: 'È¶ôËïâ', emoji: 'üçå', sound: 'banana' },
                { word: 'ORANGE', chinese: 'Ê©ôÂ≠ê', emoji: 'üçä', sound: 'orange' },
                { word: 'GRAPE', chinese: 'Ëë°ËêÑ', emoji: 'üçá', sound: 'grape' },
                { word: 'WATERMELON', chinese: 'Ë•øÁìú', emoji: 'üçâ', sound: 'watermelon' }
            ]
        };

        // Ê∏∏ÊàèÁä∂ÊÄÅ
        let gameState = {
            score: 0,
            level: 1,
            streak: 0,
            currentWord: null,
            wordList: [],
            progress: 0,
            totalWords: 10,
            correctAnswers: 0,
            achievements: []
        };

        // DOMÂÖÉÁ¥†
        const elements = {
            score: document.getElementById('score'),
            level: document.getElementById('level'),
            streak: document.getElementById('streak'),
            wordDisplay: document.getElementById('wordDisplay'),
            imageDisplay: document.getElementById('imageDisplay'),
            optionsContainer: document.getElementById('optionsContainer'),
            letterContainer: document.getElementById('letterContainer'),
            soundBtn: document.getElementById('soundBtn'),
            hintBtn: document.getElementById('hintBtn'),
            progressFill: document.getElementById('progressFill'),
            messageDisplay: document.getElementById('messageDisplay'),
            achievementDisplay: document.getElementById('achievementDisplay'),
            startScreen: document.getElementById('startScreen'),
            questionArea: document.getElementById('questionArea')
        };

        // ÂàùÂßãÂåñÊ∏∏Êàè
        function initGame(level) {
            gameState.level = level;
            gameState.score = 0;
            gameState.streak = 0;
            gameState.progress = 0;
            gameState.correctAnswers = 0;

            // ÂêàÂπ∂ÊâÄÊúâËØçÊ±á
            gameState.wordList = [
                ...vocabulary.animals,
                ...vocabulary.colors.slice(0, 3),
                ...vocabulary.fruits.slice(0, 2)
            ];

            // Êâì‰π±È°∫Â∫è
            gameState.wordList.sort(() => Math.random() - 0.5);

            elements.startScreen.style.display = 'none';
            updateDisplay();
            nextQuestion();
        }

        // Êõ¥Êñ∞ÊòæÁ§∫
        function updateDisplay() {
            elements.score.textContent = gameState.score;
            elements.level.textContent = gameState.level;
            elements.streak.textContent = gameState.streak;
            elements.progressFill.style.width = `${(gameState.progress / gameState.totalWords) * 100}%`;
        }

        // Êí≠ÊîæÈü≥Êïà
        function playSound(text) {
            // ‰ΩøÁî®Web Speech API
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.8; // ÊÖ¢ÈÄüÂèëÈü≥
                speechSynthesis.speak(utterance);
            }
        }

        // ÊòæÁ§∫Ê∂àÊÅØ
        function showMessage(text, duration = 2000) {
            elements.messageDisplay.textContent = text;
            elements.messageDisplay.style.display = 'block';
            setTimeout(() => {
                elements.messageDisplay.style.display = 'none';
            }, duration);
        }

        // ÊòæÁ§∫ÊàêÂ∞±
        function showAchievement(text) {
            elements.achievementDisplay.textContent = text;
            elements.achievementDisplay.style.display = 'block';
            setTimeout(() => {
                elements.achievementDisplay.style.display = 'none';
            }, 3000);
        }

        // ÂàõÂª∫ÊòüÊòüÂä®Áîª
        function createStar(x, y) {
            const star = document.createElement('div');
            star.className = 'star-animation';
            star.textContent = '‚≠ê';
            star.style.left = x + 'px';
            star.style.top = y + 'px';
            document.body.appendChild(star);

            setTimeout(() => star.remove(), 2000);
        }

        // ‰∏ã‰∏ÄÈ¢ò
        function nextQuestion() {
            if (gameState.progress >= gameState.totalWords) {
                endGame();
                return;
            }

            // ÈöèÊú∫ÈÄâÊã©ÂçïËØç
            gameState.currentWord = gameState.wordList[gameState.progress % gameState.wordList.length];
            gameState.progress++;

            // Ê∏ÖÁ©∫ÂÆπÂô®
            elements.optionsContainer.innerHTML = '';
            elements.letterContainer.innerHTML = '';
            elements.hintBtn.style.display = 'none';

            // Ê†πÊçÆÂÖ≥Âç°ÊòæÁ§∫‰∏çÂêåÂÜÖÂÆπ
            switch(gameState.level) {
                case 1:
                    setupLevel1();
                    break;
                case 2:
                    setupLevel2();
                    break;
                case 3:
                    setupLevel3();
                    break;
            }

            updateDisplay();
        }

        // ÂÖ≥Âç°1ÔºöÁúãÂõæÈÄâÂçïËØç
        function setupLevel1() {
            elements.imageDisplay.textContent = gameState.currentWord.emoji;
            elements.imageDisplay.style.display = 'block';
            elements.wordDisplay.textContent = '';
            elements.soundBtn.style.display = 'none';

            // ÂàõÂª∫ÈÄâÈ°π
            const options = generateOptions(gameState.currentWord);
            options.forEach(option => {
                const card = document.createElement('div');
                card.className = 'option-card';
                card.textContent = option.word;
                card.onclick = () => checkAnswer(card, option.word === gameState.currentWord.word);
                elements.optionsContainer.appendChild(card);
            });
        }

        // ÂÖ≥Âç°2ÔºöÂê¨Èü≥ÈÄâÂõæ
        function setupLevel2() {
            elements.imageDisplay.style.display = 'none';
            elements.wordDisplay.textContent = 'üîä ÁÇπÂáªÊí≠Êîæ';
            elements.soundBtn.style.display = 'block';

            // Ëá™Âä®Êí≠Êîæ‰∏ÄÊ¨°
            setTimeout(() => playSound(gameState.currentWord.word), 500);

            // ÂàõÂª∫ÂõæÁâáÈÄâÈ°π
            const options = generateOptions(gameState.currentWord);
            options.forEach(option => {
                const card = document.createElement('div');
                card.className = 'option-card';
                card.style.fontSize = '60px';
                card.textContent = option.emoji;
                card.onclick = () => checkAnswer(card, option.word === gameState.currentWord.word);
                elements.optionsContainer.appendChild(card);
            });
        }

        // ÂÖ≥Âç°3ÔºöÂçïËØçÊãºÂÜô
        function setupLevel3() {
            elements.imageDisplay.textContent = gameState.currentWord.emoji;
            elements.imageDisplay.style.display = 'block';
            elements.wordDisplay.textContent = '';
            elements.soundBtn.style.display = 'block';
            elements.hintBtn.style.display = 'block';

            // ÂàõÂª∫Â≠óÊØçÂùó
            const letters = gameState.currentWord.word.split('').sort(() => Math.random() - 0.5);
            const selectedLetters = [];

            letters.forEach((letter, index) => {
                const tile = document.createElement('div');
                tile.className = 'letter-tile';
                tile.textContent = letter;
                tile.dataset.index = index;
                tile.onclick = () => {
                    if (!tile.classList.contains('selected')) {
                        tile.classList.add('selected');
                        selectedLetters.push(letter);
                        elements.wordDisplay.textContent = selectedLetters.join('');

                        // Ê£ÄÊü•Á≠îÊ°à
                        if (selectedLetters.join('') === gameState.currentWord.word) {
                            setTimeout(() => {
                                checkSpelling(true);
                            }, 500);
                        } else if (selectedLetters.length === gameState.currentWord.word.length) {
                            setTimeout(() => {
                                checkSpelling(false);
                            }, 500);
                        }
                    }
                };
                elements.letterContainer.appendChild(tile);
            });

            // ÈáçÁΩÆÊåâÈíÆ
            const resetBtn = document.createElement('button');
            resetBtn.textContent = 'üîÑ ÈáçÁΩÆ';
            resetBtn.style.cssText = 'margin-left: 20px; padding: 10px; background: #6b7280; color: white; border: none; border-radius: 10px; cursor: pointer;';
            resetBtn.onclick = () => {
                selectedLetters.length = 0;
                elements.wordDisplay.textContent = '';
                document.querySelectorAll('.letter-tile').forEach(tile => {
                    tile.classList.remove('selected');
                });
            };
            elements.letterContainer.appendChild(resetBtn);
        }

        // ÁîüÊàêÈÄâÈ°π
        function generateOptions(correctWord) {
            const options = [correctWord];
            const allWords = [...gameState.wordList];

            // ÈöèÊú∫ÈÄâÊã©3‰∏™ÈîôËØØÈÄâÈ°π
            while (options.length < 4) {
                const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
                if (!options.find(w => w.word === randomWord.word)) {
                    options.push(randomWord);
                }
            }

            return options.sort(() => Math.random() - 0.5);
        }

        // Ê£ÄÊü•Á≠îÊ°à
        function checkAnswer(element, isCorrect) {
            // Á¶ÅÁî®ÊâÄÊúâÈÄâÈ°π
            document.querySelectorAll('.option-card').forEach(card => {
                card.style.pointerEvents = 'none';
            });

            if (isCorrect) {
                element.classList.add('correct');
                handleCorrectAnswer();
            } else {
                element.classList.add('incorrect');
                handleIncorrectAnswer();
            }

            setTimeout(() => nextQuestion(), 1500);
        }

        // Ê£ÄÊü•ÊãºÂÜô
        function checkSpelling(isCorrect) {
            if (isCorrect) {
                document.querySelectorAll('.letter-tile').forEach(tile => {
                    tile.style.background = '#22c55e';
                    tile.style.color = 'white';
                });
                handleCorrectAnswer();
                setTimeout(() => nextQuestion(), 1500);
            } else {
                document.querySelectorAll('.letter-tile.selected').forEach(tile => {
                    tile.style.background = '#ef4444';
                    tile.style.color = 'white';
                });
                handleIncorrectAnswer();
                setTimeout(() => {
                    document.querySelectorAll('.letter-tile').forEach(tile => {
                        tile.classList.remove('selected');
                        tile.style.background = 'white';
                        tile.style.color = 'black';
                    });
                    elements.wordDisplay.textContent = '';
                }, 1000);
            }
        }

        // Â§ÑÁêÜÊ≠£Á°ÆÁ≠îÊ°à
        function handleCorrectAnswer() {
            const baseScore = gameState.level === 1 ? 10 : gameState.level === 2 ? 15 : 20;
            const streakBonus = gameState.streak >= 3 ? 30 : 0;
            const totalScore = baseScore + streakBonus;

            gameState.score += totalScore;
            gameState.streak++;
            gameState.correctAnswers++;

            // ÂàõÂª∫ÊòüÊòüÂä®Áîª
            const rect = elements.questionArea.getBoundingClientRect();
            createStar(rect.left + rect.width / 2, rect.top + rect.height / 2);

            // ÊòæÁ§∫Ê∂àÊÅØ
            if (streakBonus > 0) {
                showMessage(`üéâ Â§™Ê£í‰∫ÜÔºÅËøûÂáªÂ•ñÂä±ÔºÅ+${totalScore}ÂàÜ`);
            } else {
                showMessage(`‚úÖ Ê≠£Á°ÆÔºÅ+${baseScore}ÂàÜ`);
            }

            // Ê£ÄÊü•ÊàêÂ∞±
            checkAchievements();

            playSound('Excellent! Well done!');
        }

        // Â§ÑÁêÜÈîôËØØÁ≠îÊ°à
        function handleIncorrectAnswer() {
            gameState.score = Math.max(0, gameState.score - 5);
            gameState.streak = 0;

            showMessage(`‚ùå ÂÜçËØï‰∏ÄÊ¨°ÔºÅÊ≠£Á°ÆÁ≠îÊ°àÊòØ ${gameState.currentWord.word}`);
            playSound(gameState.currentWord.word);
        }

        // Ê£ÄÊü•ÊàêÂ∞±
        function checkAchievements() {
            if (gameState.streak === 3 && !gameState.achievements.includes('streak3')) {
                gameState.achievements.push('streak3');
                showAchievement('üèÜ ÊàêÂ∞±Ëß£ÈîÅÔºö‰∏âËøûËÉúÔºÅ');
            }

            if (gameState.streak === 5 && !gameState.achievements.includes('streak5')) {
                gameState.achievements.push('streak5');
                showAchievement('üèÜ ÊàêÂ∞±Ëß£ÈîÅÔºö‰∫îËøûËÉúÂ§ßÂ∏àÔºÅ');
            }

            if (gameState.correctAnswers === 10 && !gameState.achievements.includes('master10')) {
                gameState.achievements.push('master10');
                showAchievement('üèÜ ÊàêÂ∞±Ëß£ÈîÅÔºöÂçïËØçËææ‰∫∫ÔºÅ');
            }
        }

        // Ê∏∏ÊàèÁªìÊùü
        function endGame() {
            const accuracy = Math.round((gameState.correctAnswers / gameState.totalWords) * 100);
            let grade = '';

            if (accuracy >= 90) {
                grade = 'üèÜ ÂÆåÁæéË°®Áé∞ÔºÅ';
                gameState.score += 100; // ÂÆåÁæéÈÄöÂÖ≥Â•ñÂä±
            } else if (accuracy >= 70) {
                grade = '‚≠ê ÈùûÂ∏∏Â•ΩÔºÅ';
            } else if (accuracy >= 50) {
                grade = 'üëç ÁªßÁª≠Âä™ÂäõÔºÅ';
            } else {
                grade = 'üí™ Âä†Ê≤πÔºåÂÜçËØï‰∏ÄÊ¨°ÔºÅ';
            }

            elements.messageDisplay.innerHTML = `
                <h2>üéâ Ê∏∏ÊàèÁªìÊùüÔºÅ</h2>
                <p>ÊÄªÂàÜÊï∞Ôºö${gameState.score}</p>
                <p>Ê≠£Á°ÆÁéáÔºö${accuracy}%</p>
                <p>${grade}</p>
                <button onclick="location.reload()" style="margin-top: 20px; padding: 15px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 25px; font-size: 20px; cursor: pointer;">ÂÜçÁé©‰∏ÄÊ¨°</button>
            `;
            elements.messageDisplay.style.display = 'block';
        }

        // ‰∫ã‰ª∂ÁõëÂê¨Âô®
        elements.soundBtn.addEventListener('click', () => {
            playSound(gameState.currentWord.word);
        });

        elements.hintBtn.addEventListener('click', () => {
            gameState.score = Math.max(0, gameState.score - 5);
            updateDisplay();
            showMessage(`üí° ÊèêÁ§∫ÔºöÁ¨¨‰∏Ä‰∏™Â≠óÊØçÊòØ ${gameState.currentWord.word[0]}`);
        });

        // ÂÖ≥Âç°ÈÄâÊã©
        document.querySelectorAll('.level-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const level = parseInt(e.currentTarget.dataset.level);
                initGame(level);
            });
        });

        // Èò≤Ê≠¢ÈªòËÆ§Ëß¶Êë∏Ë°å‰∏∫
        document.addEventListener('touchmove', (e) => {
            if (e.target.closest('#gameContainer')) {
                e.preventDefault();
            }
        }, { passive: false });

        // Ê∑ªÂä†Ëß¶Êë∏‰∫ã‰ª∂ÊîØÊåÅ
        document.addEventListener('touchstart', function() {}, {passive: true});
    </script>
</body>
</html>