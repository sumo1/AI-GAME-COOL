<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ğŸ¯ å¿«ä¹å­¦è‹±è¯­ - åŠ¨ç‰©ä¸–ç•Œç¯‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            user-select: none;
        }

        body {
            font-family: "Comic Sans MS", "Arial Rounded MT Bold", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            -webkit-overflow-scrolling: touch;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #gameContainer {
            width: 100%;
            max-width: 1200px;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .info-box {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #score {
            color: #10b981;
        }

        #level {
            color: #8b5cf6;
        }

        #streak {
            color: #f59e0b;
        }

        #gameArea {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        #questionArea {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            min-width: 300px;
        }

        #wordDisplay {
            font-size: 48px;
            color: #1e293b;
            margin-bottom: 20px;
            letter-spacing: 5px;
        }

        #imageDisplay {
            width: 200px;
            height: 200px;
            background: white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            margin: 0 auto 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        #optionsContainer {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .option-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 20px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .option-card:active {
            transform: scale(0.95);
        }

        .option-card.correct {
            background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
            animation: bounce 0.5s;
        }

        .option-card.incorrect {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            animation: shake 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        #letterContainer {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .letter-tile {
            width: 60px;
            height: 60px;
            background: white;
            border: 3px solid #cbd5e1;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .letter-tile.selected {
            background: #fbbf24;
            border-color: #f59e0b;
            transform: scale(1.1);
        }

        .letter-tile:active {
            transform: scale(0.9);
        }

        #soundBtn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s;
            margin: 20px 0;
        }

        #soundBtn:active {
            transform: scale(0.95);
        }

        #progressBar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        #progressFill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e 0%, #10b981 100%);
            transition: width 0.5s;
            border-radius: 10px;
        }

        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            color: white;
        }

        #startScreen h1 {
            font-size: 48px;
            margin-bottom: 30px;
            text-align: center;
        }

        .level-select {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .level-btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 25px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s;
        }

        .level-btn:active {
            transform: scale(0.95);
        }

        #messageDisplay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 40px 60px;
            border-radius: 30px;
            font-size: 32px;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 500;
        }

        .achievement {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            position: fixed;
            top: 100px;
            right: 20px;
            font-size: 18px;
            display: none;
            animation: slideIn 0.5s;
            z-index: 400;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        #hintBtn {
            background: linear-gradient(135deg, #f59e0b 0%, #eab308 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 10px;
        }

        .star-animation {
            position: fixed;
            font-size: 40px;
            animation: starFloat 2s ease-out forwards;
            pointer-events: none;
            z-index: 600;
        }

        @keyframes starFloat {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            #wordDisplay {
                font-size: 36px;
            }

            .option-card {
                font-size: 20px;
                padding: 15px;
                min-height: 60px;
            }

            .letter-tile {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }

            #startScreen h1 {
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="header">
            <div class="info-box">
                <span>ğŸ¯</span>
                <span>åˆ†æ•°: <span id="score">0</span></span>
            </div>
            <div class="info-box">
                <span>ğŸ“Š</span>
                <span>å…³å¡: <span id="level">1</span>/3</span>
            </div>
            <div class="info-box">
                <span>ğŸ”¥</span>
                <span>è¿å‡»: <span id="streak">0</span></span>
            </div>
        </div>

        <div id="progressBar">
            <div id="progressFill" style="width: 0%"></div>
        </div>

        <div id="gameArea">
            <div id="questionArea">
                <div id="imageDisplay"></div>
                <div id="wordDisplay"></div>
                <button id="soundBtn">ğŸ”Š æ’­æ”¾å‘éŸ³</button>
                <div id="letterContainer"></div>
                <button id="hintBtn" style="display: none">ğŸ’¡ æç¤º (-5åˆ†)</button>
            </div>

            <div id="optionsContainer"></div>
        </div>
    </div>

    <div id="messageDisplay"></div>
    <div class="achievement" id="achievementDisplay"></div>

    <div id="startScreen">
        <h1>ğŸŒŸ å¿«ä¹å­¦è‹±è¯­ - åŠ¨ç‰©ä¸–ç•Œ ğŸ¾</h1>
        <p style="font-size: 20px; margin-bottom: 30px;">é€‰æ‹©æ¸¸æˆæ¨¡å¼å¼€å§‹å­¦ä¹ å§ï¼</p>
        <div class="level-select">
            <button class="level-btn" data-level="1">
                ğŸ“– å•è¯è®¤çŸ¥<br>
                <small>çœ‹å›¾é€‰å•è¯</small>
            </button>
            <button class="level-btn" data-level="2">
                ğŸ‘‚ å¬éŸ³é€‰å›¾<br>
                <small>å¬å£°éŸ³é€‰å›¾ç‰‡</small>
            </button>
            <button class="level-btn" data-level="3">
                âœï¸ å•è¯æ‹¼å†™<br>
                <small>æ‹¼å‡ºæ­£ç¡®å•è¯</small>
            </button>
        </div>
    </div>

    <script>
        // æ¸¸æˆæ•°æ®
        const vocabulary = {
            animals: [
                { word: 'CAT', chinese: 'çŒ«', emoji: 'ğŸ±', sound: 'cat' },
                { word: 'DOG', chinese: 'ç‹—', emoji: 'ğŸ¶', sound: 'dog' },
                { word: 'BIRD', chinese: 'é¸Ÿ', emoji: 'ğŸ¦', sound: 'bird' },
                { word: 'FISH', chinese: 'é±¼', emoji: 'ğŸŸ', sound: 'fish' },
                { word: 'RABBIT', chinese: 'å…”å­', emoji: 'ğŸ°', sound: 'rabbit' },
                { word: 'LION', chinese: 'ç‹®å­', emoji: 'ğŸ¦', sound: 'lion' },
                { word: 'ELEPHANT', chinese: 'å¤§è±¡', emoji: 'ğŸ˜', sound: 'elephant' },
                { word: 'MONKEY', chinese: 'çŒ´å­', emoji: 'ğŸµ', sound: 'monkey' },
                { word: 'PANDA', chinese: 'ç†ŠçŒ«', emoji: 'ğŸ¼', sound: 'panda' },
                { word: 'TIGER', chinese: 'è€è™', emoji: 'ğŸ…', sound: 'tiger' }
            ],
            colors: [
                { word: 'RED', chinese: 'çº¢è‰²', emoji: 'ğŸ”´', sound: 'red' },
                { word: 'BLUE', chinese: 'è“è‰²', emoji: 'ğŸ”µ', sound: 'blue' },
                { word: 'GREEN', chinese: 'ç»¿è‰²', emoji: 'ğŸŸ¢', sound: 'green' },
                { word: 'YELLOW', chinese: 'é»„è‰²', emoji: 'ğŸŸ¡', sound: 'yellow' },
                { word: 'PINK', chinese: 'ç²‰è‰²', emoji: 'ğŸ©·', sound: 'pink' }
            ],
            fruits: [
                { word: 'APPLE', chinese: 'è‹¹æœ', emoji: 'ğŸ', sound: 'apple' },
                { word: 'BANANA', chinese: 'é¦™è•‰', emoji: 'ğŸŒ', sound: 'banana' },
                { word: 'ORANGE', chinese: 'æ©™å­', emoji: 'ğŸŠ', sound: 'orange' },
                { word: 'GRAPE', chinese: 'è‘¡è„', emoji: 'ğŸ‡', sound: 'grape' },
                { word: 'WATERMELON', chinese: 'è¥¿ç“œ', emoji: 'ğŸ‰', sound: 'watermelon' }
            ]
        };

        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            score: 0,
            level: 1,
            streak: 0,
            currentWord: null,
            wordList: [],
            progress: 0,
            totalWords: 10,
            correctAnswers: 0,
            achievements: []
        };

        // DOMå…ƒç´ 
        const elements = {
            score: document.getElementById('score'),
            level: document.getElementById('level'),
            streak: document.getElementById('streak'),
            wordDisplay: document.getElementById('wordDisplay'),
            imageDisplay: document.getElementById('imageDisplay'),
            optionsContainer: document.getElementById('optionsContainer'),
            letterContainer: document.getElementById('letterContainer'),
            soundBtn: document.getElementById('soundBtn'),
            hintBtn: document.getElementById('hintBtn'),
            progressFill: document.getElementById('progressFill'),
            messageDisplay: document.getElementById('messageDisplay'),
            achievementDisplay: document.getElementById('achievementDisplay'),
            startScreen: document.getElementById('startScreen'),
            questionArea: document.getElementById('questionArea')
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame(level) {
            gameState.level = level;
            gameState.score = 0;
            gameState.streak = 0;
            gameState.progress = 0;
            gameState.correctAnswers = 0;

            // åˆå¹¶æ‰€æœ‰è¯æ±‡
            gameState.wordList = [
                ...vocabulary.animals,
                ...vocabulary.colors.slice(0, 3),
                ...vocabulary.fruits.slice(0, 2)
            ];

            // æ‰“ä¹±é¡ºåº
            gameState.wordList.sort(() => Math.random() - 0.5);

            elements.startScreen.style.display = 'none';
            updateDisplay();
            nextQuestion();
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            elements.score.textContent = gameState.score;
            elements.level.textContent = gameState.level;
            elements.streak.textContent = gameState.streak;
            elements.progressFill.style.width = `${(gameState.progress / gameState.totalWords) * 100}%`;
        }

        // æ’­æ”¾éŸ³æ•ˆ
        function playSound(text) {
            // ä½¿ç”¨Web Speech API
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.8; // æ…¢é€Ÿå‘éŸ³
                speechSynthesis.speak(utterance);
            }
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text, duration = 2000) {
            elements.messageDisplay.textContent = text;
            elements.messageDisplay.style.display = 'block';
            setTimeout(() => {
                elements.messageDisplay.style.display = 'none';
            }, duration);
        }

        // æ˜¾ç¤ºæˆå°±
        function showAchievement(text) {
            elements.achievementDisplay.textContent = text;
            elements.achievementDisplay.style.display = 'block';
            setTimeout(() => {
                elements.achievementDisplay.style.display = 'none';
            }, 3000);
        }

        // åˆ›å»ºæ˜Ÿæ˜ŸåŠ¨ç”»
        function createStar(x, y) {
            const star = document.createElement('div');
            star.className = 'star-animation';
            star.textContent = 'â­';
            star.style.left = x + 'px';
            star.style.top = y + 'px';
            document.body.appendChild(star);

            setTimeout(() => star.remove(), 2000);
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (gameState.progress >= gameState.totalWords) {
                endGame();
                return;
            }

            // éšæœºé€‰æ‹©å•è¯
            gameState.currentWord = gameState.wordList[gameState.progress % gameState.wordList.length];
            gameState.progress++;

            // æ¸…ç©ºå®¹å™¨
            elements.optionsContainer.innerHTML = '';
            elements.letterContainer.innerHTML = '';
            elements.hintBtn.style.display = 'none';

            // æ ¹æ®å…³å¡æ˜¾ç¤ºä¸åŒå†…å®¹
            switch(gameState.level) {
                case 1:
                    setupLevel1();
                    break;
                case 2:
                    setupLevel2();
                    break;
                case 3:
                    setupLevel3();
                    break;
            }

            updateDisplay();
        }

        // å…³å¡1ï¼šçœ‹å›¾é€‰å•è¯
        function setupLevel1() {
            elements.imageDisplay.textContent = gameState.currentWord.emoji;
            elements.imageDisplay.style.display = 'block';
            elements.wordDisplay.textContent = '';
            elements.soundBtn.style.display = 'none';

            // åˆ›å»ºé€‰é¡¹
            const options = generateOptions(gameState.currentWord);
            options.forEach(option => {
                const card = document.createElement('div');
                card.className = 'option-card';
                card.textContent = option.word;
                card.onclick = () => checkAnswer(card, option.word === gameState.currentWord.word);
                elements.optionsContainer.appendChild(card);
            });
        }

        // å…³å¡2ï¼šå¬éŸ³é€‰å›¾
        function setupLevel2() {
            elements.imageDisplay.style.display = 'none';
            elements.wordDisplay.textContent = 'ğŸ”Š ç‚¹å‡»æ’­æ”¾';
            elements.soundBtn.style.display = 'block';

            // è‡ªåŠ¨æ’­æ”¾ä¸€æ¬¡
            setTimeout(() => playSound(gameState.currentWord.word), 500);

            // åˆ›å»ºå›¾ç‰‡é€‰é¡¹
            const options = generateOptions(gameState.currentWord);
            options.forEach(option => {
                const card = document.createElement('div');
                card.className = 'option-card';
                card.style.fontSize = '60px';
                card.textContent = option.emoji;
                card.onclick = () => checkAnswer(card, option.word === gameState.currentWord.word);
                elements.optionsContainer.appendChild(card);
            });
        }

        // å…³å¡3ï¼šå•è¯æ‹¼å†™
        function setupLevel3() {
            elements.imageDisplay.textContent = gameState.currentWord.emoji;
            elements.imageDisplay.style.display = 'block';
            elements.wordDisplay.textContent = '';
            elements.soundBtn.style.display = 'block';
            elements.hintBtn.style.display = 'block';

            // åˆ›å»ºå­—æ¯å—
            const letters = gameState.currentWord.word.split('').sort(() => Math.random() - 0.5);
            const selectedLetters = [];

            letters.forEach((letter, index) => {
                const tile = document.createElement('div');
                tile.className = 'letter-tile';
                tile.textContent = letter;
                tile.dataset.index = index;
                tile.onclick = () => {
                    if (!tile.classList.contains('selected')) {
                        tile.classList.add('selected');
                        selectedLetters.push(letter);
                        elements.wordDisplay.textContent = selectedLetters.join('');

                        // æ£€æŸ¥ç­”æ¡ˆ
                        if (selectedLetters.join('') === gameState.currentWord.word) {
                            setTimeout(() => {
                                checkSpelling(true);
                            }, 500);
                        } else if (selectedLetters.length === gameState.currentWord.word.length) {
                            setTimeout(() => {
                                checkSpelling(false);
                            }, 500);
                        }
                    }
                };
                elements.letterContainer.appendChild(tile);
            });

            // é‡ç½®æŒ‰é’®
            const resetBtn = document.createElement('button');
            resetBtn.textContent = 'ğŸ”„ é‡ç½®';
            resetBtn.style.cssText = 'margin-left: 20px; padding: 10px; background: #6b7280; color: white; border: none; border-radius: 10px; cursor: pointer;';
            resetBtn.onclick = () => {
                selectedLetters.length = 0;
                elements.wordDisplay.textContent = '';
                document.querySelectorAll('.letter-tile').forEach(tile => {
                    tile.classList.remove('selected');
                });
            };
            elements.letterContainer.appendChild(resetBtn);
        }

        // ç”Ÿæˆé€‰é¡¹
        function generateOptions(correctWord) {
            const options = [correctWord];
            const allWords = [...gameState.wordList];

            // éšæœºé€‰æ‹©3ä¸ªé”™è¯¯é€‰é¡¹
            while (options.length < 4) {
                const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
                if (!options.find(w => w.word === randomWord.word)) {
                    options.push(randomWord);
                }
            }

            return options.sort(() => Math.random() - 0.5);
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer(element, isCorrect) {
            // ç¦ç”¨æ‰€æœ‰é€‰é¡¹
            document.querySelectorAll('.option-card').forEach(card => {
                card.style.pointerEvents = 'none';
            });

            if (isCorrect) {
                element.classList.add('correct');
                handleCorrectAnswer();
            } else {
                element.classList.add('incorrect');
                handleIncorrectAnswer();
            }

            setTimeout(() => nextQuestion(), 1500);
        }

        // æ£€æŸ¥æ‹¼å†™
        function checkSpelling(isCorrect) {
            if (isCorrect) {
                document.querySelectorAll('.letter-tile').forEach(tile => {
                    tile.style.background = '#22c55e';
                    tile.style.color = 'white';
                });
                handleCorrectAnswer();
                setTimeout(() => nextQuestion(), 1500);
            } else {
                document.querySelectorAll('.letter-tile.selected').forEach(tile => {
                    tile.style.background = '#ef4444';
                    tile.style.color = 'white';
                });
                handleIncorrectAnswer();
                setTimeout(() => {
                    document.querySelectorAll('.letter-tile').forEach(tile => {
                        tile.classList.remove('selected');
                        tile.style.background = 'white';
                        tile.style.color = 'black';
                    });
                    elements.wordDisplay.textContent = '';
                }, 1000);
            }
        }

        // å¤„ç†æ­£ç¡®ç­”æ¡ˆ
        function handleCorrectAnswer() {
            const baseScore = gameState.level === 1 ? 10 : gameState.level === 2 ? 15 : 20;
            const streakBonus = gameState.streak >= 3 ? 30 : 0;
            const totalScore = baseScore + streakBonus;

            gameState.score += totalScore;
            gameState.streak++;
            gameState.correctAnswers++;

            // åˆ›å»ºæ˜Ÿæ˜ŸåŠ¨ç”»
            const rect = elements.questionArea.getBoundingClientRect();
            createStar(rect.left + rect.width / 2, rect.top + rect.height / 2);

            // æ˜¾ç¤ºæ¶ˆæ¯
            if (streakBonus > 0) {
                showMessage(`ğŸ‰ å¤ªæ£’äº†ï¼è¿å‡»å¥–åŠ±ï¼+${totalScore}åˆ†`);
            } else {
                showMessage(`âœ… æ­£ç¡®ï¼+${baseScore}åˆ†`);
            }

            // æ£€æŸ¥æˆå°±
            checkAchievements();

            playSound('Excellent! Well done!');
        }

        // å¤„ç†é”™è¯¯ç­”æ¡ˆ
        function handleIncorrectAnswer() {
            gameState.score = Math.max(0, gameState.score - 5);
            gameState.streak = 0;

            showMessage(`âŒ å†è¯•ä¸€æ¬¡ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ ${gameState.currentWord.word}`);
            playSound(gameState.currentWord.word);
        }

        // æ£€æŸ¥æˆå°±
        function checkAchievements() {
            if (gameState.streak === 3 && !gameState.achievements.includes('streak3')) {
                gameState.achievements.push('streak3');
                showAchievement('ğŸ† æˆå°±è§£é”ï¼šä¸‰è¿èƒœï¼');
            }

            if (gameState.streak === 5 && !gameState.achievements.includes('streak5')) {
                gameState.achievements.push('streak5');
                showAchievement('ğŸ† æˆå°±è§£é”ï¼šäº”è¿èƒœå¤§å¸ˆï¼');
            }

            if (gameState.correctAnswers === 10 && !gameState.achievements.includes('master10')) {
                gameState.achievements.push('master10');
                showAchievement('ğŸ† æˆå°±è§£é”ï¼šå•è¯è¾¾äººï¼');
            }
        }

        // æ¸¸æˆç»“æŸ
        function endGame() {
            const accuracy = Math.round((gameState.correctAnswers / gameState.totalWords) * 100);
            let grade = '';

            if (accuracy >= 90) {
                grade = 'ğŸ† å®Œç¾è¡¨ç°ï¼';
                gameState.score += 100; // å®Œç¾é€šå…³å¥–åŠ±
            } else if (accuracy >= 70) {
                grade = 'â­ éå¸¸å¥½ï¼';
            } else if (accuracy >= 50) {
                grade = 'ğŸ‘ ç»§ç»­åŠªåŠ›ï¼';
            } else {
                grade = 'ğŸ’ª åŠ æ²¹ï¼Œå†è¯•ä¸€æ¬¡ï¼';
            }

            elements.messageDisplay.innerHTML = `
                <h2>ğŸ‰ æ¸¸æˆç»“æŸï¼</h2>
                <p>æ€»åˆ†æ•°ï¼š${gameState.score}</p>
                <p>æ­£ç¡®ç‡ï¼š${accuracy}%</p>
                <p>${grade}</p>
                <button onclick="location.reload()" style="margin-top: 20px; padding: 15px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 25px; font-size: 20px; cursor: pointer;">å†ç©ä¸€æ¬¡</button>
            `;
            elements.messageDisplay.style.display = 'block';
        }

        // äº‹ä»¶ç›‘å¬å™¨
        elements.soundBtn.addEventListener('click', () => {
            playSound(gameState.currentWord.word);
        });

        elements.hintBtn.addEventListener('click', () => {
            gameState.score = Math.max(0, gameState.score - 5);
            updateDisplay();
            showMessage(`ğŸ’¡ æç¤ºï¼šç¬¬ä¸€ä¸ªå­—æ¯æ˜¯ ${gameState.currentWord.word[0]}`);
        });

        // å…³å¡é€‰æ‹©
        document.querySelectorAll('.level-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const level = parseInt(e.currentTarget.dataset.level);
                initGame(level);
            });
        });

        // é˜²æ­¢é»˜è®¤è§¦æ‘¸è¡Œä¸º
        document.addEventListener('touchmove', (e) => {
            if (e.target.closest('#gameContainer')) {
                e.preventDefault();
            }
        }, { passive: false });

        // æ·»åŠ è§¦æ‘¸äº‹ä»¶æ”¯æŒ
        document.addEventListener('touchstart', function() {}, {passive: true});
    </script>
</body>
</html>